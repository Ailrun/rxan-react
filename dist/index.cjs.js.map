{"version":3,"file":"index.cjs.js","sources":["../src/withRxan.js"],"sourcesContent":["import React from 'react'\n\nconst withRxan = (value$, config) => (C) => {\n  config = {\n    startPropName: 'start',\n    stopPropName: 'stop',\n    valuePropName: 'value',\n    ...config,\n  }\n\n  return class extends React.Component {\n    constructor(props, context) {\n      super(props, context)\n\n      this.state = {\n        lastValue: undefined,\n        subscription: undefined,\n      }\n\n      this.start = this.start.bind(this)\n      this.stop = this.stop.bind(this)\n    }\n\n    start() {\n      this.setState((state) => {\n        if (state.subscription) {\n          return {}\n        }\n\n        return {\n          subscription: value$.subscribe((v) => {\n            this.setState({\n              lastValue: v,\n            })\n          }, undefined, () => {\n            this.setState({\n              subscription: undefined,\n            })\n          }),\n        }\n      })\n    }\n\n    stop() {\n      this.setState((state) => {\n        if (!state.subscription) {\n          return {}\n        }\n\n        state.subscription.unsubscribe()\n\n        return {\n          subscription: undefined,\n        }\n      })\n    }\n\n    render() {\n      const addedProps = {\n        [config.startPropName]: this.start,\n        [config.stopPropName]: this.stop,\n        [config.valuePropName]: this.state.lastValue,\n      }\n\n      return (\n        <C {...this.props} {...addedProps} />\n      )\n    }\n  }\n}\nexport {\n  withRxan,\n}\n"],"names":["withRxan","value$","config","C","props","context","state","undefined","start","bind","stop","setState","subscription","subscribe","v","unsubscribe","addedProps","startPropName","stopPropName","valuePropName","lastValue","React","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,WAAW,SAAXA,QAAW,CAACC,MAAD,EAASC,MAAT;SAAoB,UAACC,CAAD,EAAO;;qBAEzB,OADjB;oBAEgB,MAFhB;qBAGiB;OACZD,MAJL;;;;;sBAQcE,KAAZ,EAAmBC,OAAnB,EAA4B;;;mHACpBD,KADoB,EACbC,OADa;;cAGrBC,KAAL,GAAa;qBACAC,SADA;wBAEGA;SAFhB;;cAKKC,KAAL,GAAa,MAAKA,KAAL,CAAWC,IAAX,OAAb;cACKC,IAAL,GAAY,MAAKA,IAAL,CAAUD,IAAV,OAAZ;;;;;;gCAGM;;;eACDE,QAAL,CAAc,UAACL,KAAD,EAAW;gBACnBA,MAAMM,YAAV,EAAwB;qBACf,EAAP;;;mBAGK;4BACSX,OAAOY,SAAP,CAAiB,UAACC,CAAD,EAAO;uBAC/BH,QAAL,CAAc;6BACDG;iBADb;eADY,EAIXP,SAJW,EAIA,YAAM;uBACbI,QAAL,CAAc;gCACEJ;iBADhB;eALY;aADhB;WALF;;;;+BAmBK;eACAI,QAAL,CAAc,UAACL,KAAD,EAAW;gBACnB,CAACA,MAAMM,YAAX,EAAyB;qBAChB,EAAP;;;kBAGIA,YAAN,CAAmBG,WAAnB;;mBAEO;4BACSR;aADhB;WAPF;;;;iCAaO;;;cACDS,4DACHd,OAAOe,aADJ,EACoB,KAAKT,KADzB,+BAEHN,OAAOgB,YAFJ,EAEmB,KAAKR,IAFxB,+BAGHR,OAAOiB,aAHJ,EAGoB,KAAKb,KAAL,CAAWc,SAH/B,eAAN;;iBAOE,oBAAC,CAAD,eAAO,KAAKhB,KAAZ,EAAuBY,UAAvB,EADF;;;;MAtDiBK,MAAMC,SAA3B;GARe;CAAjB;;;;"}