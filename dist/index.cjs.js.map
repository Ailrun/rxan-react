{"version":3,"file":"index.cjs.js","sources":["../src/withRxan.js"],"sourcesContent":["import React from 'react'\n\nconst withRxan = (value$, config) => (C) => {\n  if (config.startPropName !== undefined) {\n    console.warn('Props \\'startPropName\\' is deprecated. Please use \\'mapAnimationToProps\\' instead.')\n  }\n\n  if (config.stopPropName !== undefined) {\n    console.warn('Props \\'stopPropName\\' is deprecated. Please use \\'mapAnimationToProps\\' instead.')\n  }\n\n  if (config.valuePropName !== undefined) {\n    console.warn('Props \\'valuePropName\\' is deprecated. Please use \\'mapAnimationToProps\\' instead.')\n  }\n\n  config = {\n    startPropName: 'start',\n    stopPropName: 'stop',\n    valuePropName: 'value',\n    mapAnimationToProps(value, start, stop) {\n      return {\n        [this.valuePropName]: value,\n        [this.startPropName]: start,\n        [this.stopPropName]: stop,\n      }\n    },\n    ...config,\n  }\n\n  return class extends React.Component {\n    constructor(props, context) {\n      super(props, context)\n\n      this.state = {\n        lastValue: undefined,\n      }\n      this.subscription = undefined\n\n      this.start = this.start.bind(this)\n      this.stop = this.stop.bind(this)\n    }\n\n    start() {\n      if (!this.subscription) {\n        this.subscription = value$.subscribe((v) => {\n          this.setState({\n            lastValue: v,\n          })\n        }, undefined, () => {\n          this.stop()\n        })\n      }\n    }\n\n    stop() {\n      if (this.subscription) {\n        this.subscription.unsubscribe()\n        this.subscription = undefined\n      }\n    }\n\n    render() {\n      const addedProps =\n        config.mapAnimationToProps(this.state.lastValue, this.start, this.stop)\n\n      return (\n        <C {...this.props} {...addedProps} />\n      )\n    }\n  }\n}\nexport {\n  withRxan,\n}\n"],"names":["withRxan","value$","config","C","startPropName","undefined","warn","stopPropName","valuePropName","value","start","stop","props","context","state","subscription","bind","subscribe","v","setState","unsubscribe","addedProps","mapAnimationToProps","lastValue","React","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,WAAW,SAAXA,QAAW,CAACC,MAAD,EAASC,MAAT;SAAoB,UAACC,CAAD,EAAO;QACtCD,OAAOE,aAAP,KAAyBC,SAA7B,EAAwC;cAC9BC,IAAR,CAAa,oFAAb;;;QAGEJ,OAAOK,YAAP,KAAwBF,SAA5B,EAAuC;cAC7BC,IAAR,CAAa,mFAAb;;;QAGEJ,OAAOM,aAAP,KAAyBH,SAA7B,EAAwC;cAC9BC,IAAR,CAAa,oFAAb;;;;qBAIe,OADjB;oBAEgB,MAFhB;qBAGiB,OAHjB;yBAAA,+BAIsBG,KAJtB,EAI6BC,KAJ7B,EAIoCC,IAJpC,EAI0C;;;+CAEnC,KAAKH,aADR,EACwBC,KADxB,wBAEG,KAAKL,aAFR,EAEwBM,KAFxB,wBAGG,KAAKH,YAHR,EAGuBI,IAHvB;;OAMCT,MAXL;;;;;sBAecU,KAAZ,EAAmBC,OAAnB,EAA4B;;;mHACpBD,KADoB,EACbC,OADa;;cAGrBC,KAAL,GAAa;qBACAT;SADb;cAGKU,YAAL,GAAoBV,SAApB;;cAEKK,KAAL,GAAa,MAAKA,KAAL,CAAWM,IAAX,OAAb;cACKL,IAAL,GAAY,MAAKA,IAAL,CAAUK,IAAV,OAAZ;;;;;;gCAGM;;;cACF,CAAC,KAAKD,YAAV,EAAwB;iBACjBA,YAAL,GAAoBd,OAAOgB,SAAP,CAAiB,UAACC,CAAD,EAAO;qBACrCC,QAAL,CAAc;2BACDD;eADb;aADkB,EAIjBb,SAJiB,EAIN,YAAM;qBACbM,IAAL;aALkB,CAApB;;;;;+BAUG;cACD,KAAKI,YAAT,EAAuB;iBAChBA,YAAL,CAAkBK,WAAlB;iBACKL,YAAL,GAAoBV,SAApB;;;;;iCAIK;cACDgB,aACJnB,OAAOoB,mBAAP,CAA2B,KAAKR,KAAL,CAAWS,SAAtC,EAAiD,KAAKb,KAAtD,EAA6D,KAAKC,IAAlE,CADF;;iBAIE,oBAAC,CAAD,eAAO,KAAKC,KAAZ,EAAuBS,UAAvB,EADF;;;;MApCiBG,MAAMC,SAA3B;GA3Be;CAAjB;;;;"}