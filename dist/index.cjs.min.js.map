{"version":3,"file":"index.cjs.min.js","sources":["../src/withRxan.js"],"sourcesContent":["import React from 'react'\n\nconst withRxan = (value$, config) => (C) => {\n  config = {\n    startPropName: 'start',\n    stopPropName: 'stop',\n    valuePropName: 'value',\n    ...config,\n  }\n\n  return class extends React.Component {\n    constructor(props, context) {\n      super(props, context)\n\n      this.state = {\n        lastValue: undefined,\n        subscription: undefined,\n      }\n\n      this.start = this.start.bind(this)\n      this.stop = this.stop.bind(this)\n    }\n\n    start() {\n      this.setState((state) => {\n        if (state.subscription) {\n          return {}\n        }\n\n        return {\n          subscription: value$.subscribe((v) => {\n            this.setState({\n              lastValue: v,\n            })\n          }, undefined, () => {\n            this.setState({\n              subscription: undefined,\n            })\n          }),\n        }\n      })\n    }\n\n    stop() {\n      this.setState((state) => {\n        if (!state.subscription) {\n          return {}\n        }\n\n        state.subscription.unsubscribe()\n\n        return {\n          subscription: undefined,\n        }\n      })\n    }\n\n    render() {\n      const addedProps = {\n        [config.startPropName]: this.start,\n        [config.stopPropName]: this.stop,\n        [config.valuePropName]: this.state.lastValue,\n      }\n\n      return (\n        <C {...this.props} {...addedProps} />\n      )\n    }\n  }\n}\nexport {\n  withRxan,\n}\n"],"names":["withRxan","value$","config","C","props","context","state","undefined","start","_this","bind","stop","setState","subscription","subscribe","v","unsubscribe","addedProps","startPropName","this","stopPropName","valuePropName","lastValue","React","Component"],"mappings":"+1CAEMA,SAAW,SAACC,EAAQC,UAAW,SAACC,oCAEnB,qBACD,qBACC,SACZD,0BAISE,EAAOC,iHACXD,EAAOC,aAERC,sBACQC,oBACGA,KAGXC,MAAQC,EAAKD,MAAME,UACnBC,KAAOF,EAAKE,KAAKD,4FAIjBE,SAAS,SAACN,UACTA,EAAMO,8BAKMZ,EAAOa,UAAU,SAACC,KACzBH,oBACQG,UAEZR,EAAW,aACPK,4BACWL,6CAQjBK,SAAS,SAACN,UACRA,EAAMO,gBAILA,aAAaG,iCAGHT,gDAMZU,uBACHf,EAAOgB,cAAgBC,KAAKX,wBAC5BN,EAAOkB,aAAeD,KAAKR,uBAC3BT,EAAOmB,cAAgBF,KAAKb,MAAMgB,qBAInCC,oBAACpB,cAAMgB,KAAKf,MAAWa,WAvDRM,MAAMC"}